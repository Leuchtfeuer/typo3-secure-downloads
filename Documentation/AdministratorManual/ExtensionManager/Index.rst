.. ==================================================
.. FOR YOUR INFORMATION
.. --------------------------------------------------
.. -*- coding: utf-8 -*- with BOM.

.. include:: ../../Includes.txt

.. _extensionmanager:

Extension Manager
=================

All configuration is made in the Extension Manager.

Properties
----------

.. container:: ts-properties

	==================================== ==================================== ==================
	Property                             Prefix/Tab                           Type
	==================================== ==================================== ==================
	cachetimeadd_                        basic                                integer
	linkFormat_                          basic                                string
	enableGroupCheck_                    basic                                boolean
	groupCheckDirs_                      basic                                string
	excludeGroups_                       basic                                string
	securedDirs_                         basic                                string
	securedFiletypes_                    basic                                string
	domain_                              basic                                string
	apacheDelivery_                      filedelivery                         boolean
	forcedownload_                       filedelivery                         boolean
	forcedownloadtype_                   filedelivery                         string
	additionalMimeTypes_                 filedelivery                         string
	outputFunction_                      filedelivery                         string
	outputChunkSize_                     filedelivery                         integer
	protectedPath_                       filedelivery                         string
	log_                                 module                               boolean
	debug_                               debug                                integer
	==================================== ==================================== ==================

Property details
----------------

.. contents::
    :local:
    :depth: 1

.. _adminCachetimeadd:

cachetimeadd
""""""""""""
.. container:: table-row

   Property
         basic.cachetimeadd
   Data type
         integer
   Description
         The secure link is only valid for a limited time, which is calculated from the cache time that is used for the page that carries the link plus this value (in seconds). Default is 3600 sec (= 1 h).
   Default
         3600

.. _adminLinkFormat:

linkFormat
"""""""""""
.. container:: table-row

   Property
         basic.linkFormat
   Data type
         string
   Description
         The Format for the link generated by secure_downloads. You can change this if you apply appropriate mod_rewrite rules in your .htaccess file.

         Example:
         linkFormat: :code:`securedl/###FEUSER###/###TIMEOUT###/###HASH###/###FILE###`

         Put the following in your .htaccess (one line)

         :code:`RewriteRule ^securedl/([\d]+)/([\d]+)/([0123456789abcdef]+)/([^&]+)$ index.php?eID=tx_securedownloads&u=$1&t=$2&hash=$3&file=$4 [nc,L]`
   Default
         :code:`index.php?eID=tx_securedownloads&u=###FEUSER###&g=###FEGROUPS###&t=###TIMEOUT###&hash=###HASH###&file=###FILE###`

.. _adminEnableGroupCheck:

enableGroupCheck
""""""""""""""""
.. container:: table-row

   Property
         basic.enableGroupCheck
   Data type
         boolean
   Description
         Allows forwarding a secure download link to others, who can access that file if they have at least one front-end user group in common. Enabling this makes the checks *less* restrictive!
   Default
         false

.. _adminGroupCheckDirs:

groupCheckDirs
""""""""""""""
.. container:: table-row

   Property
         basic.groupCheckDirs
   Data type
         string
   Description
         A list of directories for the less restrictive group check, separated by a pipe (|). Leave empty if you want to enable the group check for all directories.
   Default
         empty

.. _adminExcludeGroups:

excludeGroups
""""""""""""""
.. container:: table-row

   Property
         basic.excludeGroups
   Data type
         string
   Description
         A comma separated list of groups that are excluded from the group check feature (if enabled).
   Default
         empty

.. _adminSecureDirs:

securedDirs
"""""""""""
.. container:: table-row

   Property
         basic.securedDirs
   Data type
         string
   Description
         List of directories of your TYPO3 Server in that files should be secured, separated by pipe (|)

         For exclude a sub-directory in a directory use (?!path/to/sub)path
   Default
         :code:`typo3temp|fileadmin|uploads`

.. _adminSecuredFiletypes:

securedFiletypes
""""""""""""""""
.. container:: table-row

   Property
         basic.securedFiletypes
   Data type
         string
   Description
         List of file types that should be protected. Multiple file extension patterns can be separated by a pipe (|).
   Default
         :code:`pdf|jpe?g|gif|png|odt|pptx?|docx?|xlsx?|zip|rar|tgz|tar|gz`

.. _adminDomain:

domain
""""""
.. container:: table-row

   Property
         basic.domain
   Data type
         string
   Description
         This is only required for absolute filelinks to your local server, e.g.  :code:`http://my.server.com/fileadmin/image.jpg`. Not needed for internal (relative) links.
   Default
         :code:`http://mydomain.com/|http://my.other.domain.org/`

.. _adminApacheDelivery:

apacheDelivery
""""""""""""""
.. container:: table-row

   Property
         filedelivery.apacheDelivery
   Data type
         boolean
   Description
         Feature to deliver files through Apache Webserver not PHP (beta)
   Default
         false

.. _adminForcedownload:

forcedownload
"""""""""""""
.. container:: table-row

   Property
         filedelivery.forcedownload
   Data type
         boolean
   Description
         If this is checked some filetypes are forced to be downloaded in contrast of beeing embedded in the browser window
   Default
         false

.. _adminForcedownloadtype:

forcedownloadtype
"""""""""""""""""
.. container:: table-row

   Property
         filedelivery.forcedownloadtype
   Data type
         string
   Description
         List of filetypes that should be forced to be downloaded (see above)
   Default
         :code:`odt|pptx?|docx?|xlsx?|zip|rar|tgz|tar|gz`

.. _adminAdditionalMimeTypes:

additionalMimeTypes
"""""""""""""""""""
.. container:: table-row

   Property
         filedelivery.additionalMimeTypes
   Data type
         string
   Description
         Comma separated list of additional MIME types (file extension / mime type pairs, in which file extension and MIME type is separated by a pipe symbol). Can be used to override existing MIME type settings of the extension as well.
   Default
         :code:`txt|text/plain,html|text/html`

.. _adminOutputFunction:

outputFunction
""""""""""""""
.. container:: table-row

   Property
         filedelivery.outputFunction
   Data type
         string
   Description
         Due to possible restrictions in php and php settings, you probably need to adjust this value. By default “readfile” is used to deliver the file. If this function is disabled in your php settings, you can try fpasstrugh. If you hav problems with php memory_limit and big files to download, you need to set this to readfile_chunked, which delivers the files in small portions. If you activate the logging, only the transmitted portions are stored in the database table. Again, make sure you have no performance problem here, because multiple SQL-queries are fired to track the transmitted bytes.
   Default
         readfile

.. _adminOutputChunkSize:

outputChunkSize
"""""""""""""""
.. container:: table-row

   Property
         filedelivery.outputChunkSize
   Data type
         integer
   Description
         Only applicable if you use readfile_chunked (see outputFunction). Specify the number of bytes, served as one chunk when delivering the file. Choosing this value too low is a performance killer.
   Default
         1048576

.. _adminProtectedPath:

protectedPath
"""""""""""""""
.. container:: table-row

   Property
         filedelivery.protectedPath
   Data type
         string
   Description
         Only applicable if you use x-accel-redirect (see outputFunction). Specify the protected path used in your nginx location directive;
   Default
         empty

.. _adminLog:

log
"""
.. container:: table-row

   Property
         module.log
   Data type
         boolean
   Description
         Each file access will be logged to database, this could be a performance issue, if you have a high traffic site. If you decide to turn it on, a backend module will be activated to see the traffic caused by user/ file
   Default
         false

.. _adminDebug:

debug
"""""
.. container:: table-row

   Property
         debug.debug
   Data type
         string
   Description
         For developing only
   Default
         0

You also need to secure all the directories and filetypes by your server configuration. This can be done with .htaccess files. Some example .htaccess files you find in the /res folder.

.. important::
	This extension cannot secure links to files that you include in your CSS file. For example you can secure /fileadmin with the default .htaccess_deny file by putting the file in /fileadmin. You can allow /fileadmin/templates/ with the default .htaccess_allow file by putting this file to /fileadmin/template/
