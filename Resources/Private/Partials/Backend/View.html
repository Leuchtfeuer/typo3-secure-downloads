<f:flashMessages/>

<f:render partial="Backend/Filter" arguments="{_all}"/>

<div class="com-sm-12">
    <f:variable name="count">{logs -> f:count() -> f:format.number(decimals: 0)}</f:variable>
    <f:variable name="traffic">{statistic.traffic -> f:format.bytes()}</f:variable>
    <f:variable name="from">{statistic.from -> f:format.date(format: '{f:translate(key: \'dateformat\')}')}</f:variable>
    <f:variable name="till">{statistic.till -> f:format.date(format: '{f:translate(key: \'dateformat\')}')}</f:variable>

    {f:translate(key: 'module.subheading', arguments: '{0: count, 1: traffic, 2: from, 3: till}') -> f:format.html()}
</div>

<hr/>

<f:if condition="{logs}">
    <f:widget.paginate objects="{logs}" as="paginatedLogs"
                       configuration="{itemsPerPage: 100, insertAbove: 1, maximumNumberOfLinks: 10}">
        <table class="table table-striped table-hover typo3-page-pages">
            <thead>
            <tr>
                <th><f:translate key="module.table.heading.tstamp"/></th>
                <th><f:translate key="module.table.heading.file_name"/></th>
                <th><f:translate key="module.table.heading.file_size"/></th>
                <th><f:translate key="module.table.heading.file_type"/></th>
                <th><f:translate key="module.table.heading.media_type"/></th>
                <th><f:translate key="module.table.heading.user"/></th>
            </tr>
            </thead>

            <tbody>
            <f:for each="{paginatedLogs}" as="log">
                <tr>
                    <td>
                        <f:format.date format="{f:translate(key:'dateformat')}">@{log.tstamp}</f:format.date>
                    </td>
                    <td><abbr title="{log.filePath}">{log.fileName}</abbr></td>
                    <td>{log.fileSize -> f:format.bytes()}</td>
                    <td>{log.fileType}</td>
                    <td>{log.mediaType}</td>
                    <td>
                        <f:if condition="{log.user}">
                            <f:then>
                                {log.userObject.username}
                            </f:then>
                            <f:else>
                                {f:translate(key:'module.table.body.no_user')}
                            </f:else>
                        </f:if>
                    </td>
                </tr>
            </f:for>
            </tbody>
        </table>
    </f:widget.paginate>
</f:if>
